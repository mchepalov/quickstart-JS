<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Быстрый старт JS</title>
  </head>
  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    body h1 {
      margin: 15px 0;
    }
  </style>
  <body>
    <h1>Веб-компоненты</h1>

    <my-select>
      <option value="opt1">Option 1</option>
      <option value="opt2">Option 2</option>
      <option value="opt3">Option 3</option>
    </my-select>

    <script>
      const onLoad = (evt) => {
        const componentName = evt.target.dataset.name;

        if (window.MySelect) {
          customElements.define(componentName, window.MySelect);
        }
      };

      const onError = (err) => {
        console.error('Ошибка загрузки:', err);
      };

      const components = ['my-select'];

      components.forEach((component) => {
        const script = document.createElement('script');
        script.src = `./${component}.js`;
        script.dataset.name = component;
        script.addEventListener('load', onLoad);
        script.addEventListener('error', onError);
        document.body.append(script);
      });
    </script>
  </body>
</html>
